<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.paint.LinearGradient?>
<?import javafx.scene.paint.Stop?>
<?import javafx.scene.shape.Rectangle?>

<VBox alignment="CENTER" prefHeight="700" prefWidth="1000" stylesheets="@form.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="controllers.ReservationFormController">

    <!-- Background Gradient -->
    <StackPane>
        <Rectangle arcHeight="30" arcWidth="30" height="700" width="1000">
            <fill>
                <LinearGradient endX="1.0" endY="1.0">
                    <stops>
                        <Stop>
                            <color>
                                <Color red="0.29411765933036804" green="0.42352941632270813" blue="0.7176470756530762" />
                            </color></Stop>
                        <Stop offset="1.0">
                            <color>
                                <Color red="0.929411768913269" green="0.4000000059604645" blue="0.21568627655506134" />
                            </color></Stop>
                    </stops>
                </LinearGradient>
            </fill>
        </Rectangle>

        <!-- Form Card with Rounded Corners and Shadows -->
        <VBox fx:id="formCard" alignment="CENTER" spacing="20" styleClass="form-card">
            <effect>
                <DropShadow color="#00000050" offsetX="0" offsetY="5" radius="10" />
            </effect>

            <!-- Offer Details -->
            <VBox alignment="CENTER" spacing="10" styleClass="offer-details">
                <ImageView fx:id="imgOffer" fitHeight="200" fitWidth="300" preserveRatio="true" />
                <Label fx:id="lblOfferName" styleClass="offer-title" />
                <Label fx:id="lblOfferDescription" maxWidth="500" styleClass="offer-description" wrapText="true" />
            </VBox>

            <!-- Number of People -->
            <HBox alignment="CENTER" prefHeight="30.0" prefWidth="746.0" spacing="10">
                <ImageView fitHeight="17.0" fitWidth="37.0" preserveRatio="true">
                    <Image url="@people.png" />
                </ImageView>
                <Label prefHeight="23.0" prefWidth="211.0" styleClass="form-label" text="Nombre de personnes:" />
                <Spinner fx:id="spAdults" editable="true" initialValue="1" styleClass="form-spinner" />
                <Label prefHeight="23.0" prefWidth="89.0" styleClass="form-label" text="Adultes" />
                <Spinner fx:id="spChildren" editable="true" initialValue="0" styleClass="form-spinner" />
                <Label prefHeight="23.0" prefWidth="86.0" styleClass="form-label" text="Enfants" />
            </HBox>

            <!-- Date Selection -->
            <HBox alignment="CENTER" spacing="10">
                <ImageView fitHeight="20" fitWidth="20" preserveRatio="true">
                    <Image url="@calender.png" />
                </ImageView>
                <Label prefHeight="23.0" prefWidth="142.0" styleClass="form-label" text="Date de dÃ©but:" />
                <DatePicker fx:id="dpStartDate" styleClass="form-datepicker" />
                <Label prefHeight="23.0" prefWidth="106.0" styleClass="form-label" text="Date de fin:" />
                <DatePicker fx:id="dpEndDate" styleClass="form-datepicker" />
            </HBox>

            <!-- Total Price with Tooltip -->
            <Label fx:id="lblTotalPrice" styleClass="total-price">
                <tooltip>
                    <Tooltip text="Le prix total est basÃ© sur le nombre d'adultes et d'enfants (50% du tarif adulte pour les enfants)." />
                </tooltip>
            </Label>

            <!-- Confirmation Buttons with Hover Effects -->
            <HBox spacing="20">
                <Button fx:id="btnConfirm" onAction="#handlePayment" styleClass="confirm-button" text="âœ… Confirmer la RÃ©servation" />
                <Button onAction="#goToReservationList" prefHeight="47.0" prefWidth="273.0" styleClass="confirm-button" text="ðŸ“‹ Voir Mes RÃ©servations" />
                <Label fx:id="lblPaymentStatus" />
            </HBox>

            <!-- Loading Spinner (Initially Hidden) -->
            <ProgressIndicator fx:id="loadingSpinner" visible="false" />

            <!-- Status Message -->
            <Label fx:id="lblStatus" styleClass="status-message" visible="false" />
        </VBox>
    </StackPane>
</VBox>
