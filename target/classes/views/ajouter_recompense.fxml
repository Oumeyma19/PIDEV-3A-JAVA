<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.text.*?>

<BorderPane xmlns="http://javafx.com/javafx/8.0"
            xmlns:fx="http://javafx.com/fxml/1"
            stylesheets="@stylerecompense.css"
            fx:controller="controllers.AjouterRecompenseController"
            prefWidth="800" prefHeight="600">

    <!-- En-tête dans le style de Home -->
    <top>
        <VBox>
            <!-- Barre de navigation similaire à Home -->
            <HBox alignment="CENTER" spacing="10" style="-fx-background-color: #ed6637; -fx-padding: 10; -fx-border-radius: 5; -fx-background-radius: 5;">
                <Button text="Accueil" style="-fx-text-fill: white;" styleClass="nav-button" />
                <Button text="Vols" style="-fx-text-fill: white;" styleClass="nav-button" />
                <Button text="Hébergements" style="-fx-text-fill: white;" styleClass="nav-button" />
                <Button text="Tours" style="-fx-text-fill: white;" styleClass="nav-button" />
                <Button text="Offres" style="-fx-text-fill: white;" styleClass="nav-button" />
                <Button text="Récompenses" style="-fx-text-fill: white; -fx-background-color: #d55a2e;" styleClass="nav-button" />
                <Button text="Espace Fidélité" style="-fx-text-fill: white;" styleClass="nav-button" />
                <Button text="Profil" style="-fx-text-fill: white;" styleClass="nav-button" />
            </HBox>

            <!-- Titre de la page avec bouton retour -->
            <HBox alignment="CENTER_LEFT" styleClass="header">
                <Button onAction="#goBackToRecompenseList" styleClass="back-button">
                    <graphic>
                        <ImageView fitWidth="24" fitHeight="24">
                            <image>
                                <Image url="/views/arrow.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
                <Label text="Ajouter une Récompense" styleClass="header-text" HBox.hgrow="ALWAYS" alignment="CENTER" />
                <Region prefWidth="24" /> <!-- Espace pour équilibrer le bouton retour -->
            </HBox>
        </VBox>
    </top>

    <!-- Contenu principal -->
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <VBox alignment="TOP_CENTER" spacing="20" style="-fx-padding: 30 20;">
                <!-- Formulaire dans un conteneur stylisé -->
                <VBox styleClass="form-container" maxWidth="600">
                    <Label text="Informations de la récompense" styleClass="form-title" />
                    <Separator />
                    <padding>
                        <Insets top="20" right="30" bottom="30" left="30" />
                    </padding>

                    <!-- Champs du formulaire -->
                    <GridPane hgap="15" vgap="15">
                        <columnConstraints>
                            <ColumnConstraints minWidth="100" />
                            <ColumnConstraints hgrow="ALWAYS" />
                        </columnConstraints>

                        <!-- Nom de la récompense -->
                        <Label text="Nom:" styleClass="field-label" GridPane.rowIndex="0" GridPane.columnIndex="0" />
                        <TextField fx:id="nomField" promptText="Entrez le nom de la récompense"
                                   styleClass="input-field" GridPane.rowIndex="0" GridPane.columnIndex="1" />

                        <!-- Description de la récompense -->
                        <Label text="Description:" styleClass="field-label" GridPane.rowIndex="1" GridPane.columnIndex="0" />
                        <TextArea fx:id="descriptionField" promptText="Entrez la description de la récompense"
                                  wrapText="true" prefHeight="80" styleClass="input-field"
                                  GridPane.rowIndex="1" GridPane.columnIndex="1" />

                        <!-- Points requis -->
                        <Label text="Points:" styleClass="field-label" GridPane.rowIndex="2" GridPane.columnIndex="0" />
                        <TextField fx:id="pointsField" promptText="Nombre de points requis"
                                   styleClass="input-field" GridPane.rowIndex="2" GridPane.columnIndex="1" />

                        <!-- Upload image -->
                        <Label text="Image:" styleClass="field-label" GridPane.rowIndex="3" GridPane.columnIndex="0" />
                        <HBox spacing="10" GridPane.rowIndex="3" GridPane.columnIndex="1">
                            <Button fx:id="uploadButton" text="Sélectionner une image"
                                    onAction="#handleUploadPhoto" styleClass="upload-button" />
                            <Button fx:id="generateImageButton" text="Générer une image IA"
                                    onAction="#handleGenerateImage" styleClass="action-button"
                                    style="-fx-background-color: #3A86FF; -fx-text-fill: white;"/>
                        </HBox>
                        <!-- Prévisualisation de l'image -->
                        <Label text="Aperçu:" styleClass="field-label" GridPane.rowIndex="4" GridPane.columnIndex="0" />
                        <StackPane styleClass="preview-image" prefHeight="200" GridPane.rowIndex="4" GridPane.columnIndex="1">
                            <ImageView fx:id="imageView" fitWidth="300" fitHeight="200" preserveRatio="true" />
                            <Label text="Aucune image sélectionnée" fx:id="noImageLabel" />
                        </StackPane>
                    </GridPane>
                    <!-- Bouton de sauvegarde -->
                    <HBox alignment="CENTER" spacing="15" style="-fx-padding: 20 0 0 0;">
                        <Button text="Ajouter la récompense" onAction="#handleAddRecompense" styleClass="save-button" />
                    </HBox>
                </VBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>